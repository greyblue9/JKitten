<?xml version="1.0" encoding="UTF-8"?>

* S * NUMBER IS *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="contacttype">
          <star index="2"/>
        </set>
        <set name="contacturi">
          <star index="3"/>
        </set>
        <set name="learnpattern">DIALNUMBER</set>
      </think>
      <srai>ADDACTION</srai>

<set>name</set> S * NUMBER IS *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="contacttype">
          <star index="2"/>
        </set>
        <set name="contacturi">
          <star index="3"/>
        </set>
        <set name="learnpattern">DIALNUMBER</set>
      </think>
      <srai>ADDACTION</srai>

<topic name="ASKING TO ADD NEW CONTACTURI">
*WOULD YOU LIKE TO ADD ONE
<think>
          <set name="topic">unknown</set>
        </think>
        <srai>CONTACTFINALIZE</srai>
        <srai>
          <star/>
        </srai>


<topic name="ASKING TO ADD NEW CONTACTNAME">
*WOULD YOU LIKE TO ADD * AS A CONTACT
<think>
          <set name="topic">unknown</set>
        </think>
        <srai>CONTACTFINALIZE</srai>
        <srai>
          <star/>
        </srai>


TELL THAT TO *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="messagebody">
          <response/>
        </set>
      </think>
      <srai>SMSACTION</srai>

SEND EMAIL
<srai>CONTACTDEBUGINFO EMAIL</srai>
      <srai>CONTACTINIT</srai>
      <srai>EMAILACTION</srai>

ADDINFO CONTACTID
<srai>CONTACTDEBUGINFO ADDINFO CONTACT</srai><think><set name="contacturi"><srai>DENORMALIZE <get name="contacturi"/></srai></set><condition name="modecom"><li value="ADD"><condition name="contacttype" value="unknown"><set name="contacttype">home</set></condition></li><li value="SMS"><condition name="contacttype" value="unknown"><set name="contacttype">mobile</set></condition></li><li value="CALL"><condition name="contacttype" value="unknown"><set name="contacttype">mobile</set></condition></li><li value="EMAIL"><condition name="contacttype" value="unknown"><set name="contacttype">home</set></condition></li><li><condition name="contacttype" value="unknown"><set name="contacttype">home</set></condition></li></condition><condition><name>learnpattern</name><li><value>DIALNUMBER</value><srai>ADDINFO DISPLAYNAME <get name="displayname"/> DIALNUMBER <get name="contacturi"/> PHONETYPE <get name="contacttype"/> EMAILADDRESS unknown EMAILTYPE unknown BIRTHDAY <get name="contactbirthday"/></srai></li><li><value>EMAILADDRESS</value><srai>ADDINFO DISPLAYNAME <get name="displayname"/> DIALNUMBER unknown PHONETYPE unknown EMAILADDRESS <get name="contacturi"/> EMAILTYPE <get name="contacttype"/> BIRTHDAY <get name="contactbirthday"/></srai></li><li><srai>ADDINFO DISPLAYNAME <get name="displayname"/> DIALNUMBER unknown PHONETYPE unknown EMAILADDRESS unknown EMAILTYPE unknown BIRTHDAY unknown</srai></li></condition></think>
I'm remembering <get name="displayname"/>'s <lowercase><get name="contacttype"/></lowercase> <condition name="learnpattern"><li value="DIALNUMBER">phone number</li><li value="EMAILADDRESS">email address</li></condition> is <get name="contacturi"/>.

ASK TO ADD NEW CONTACTNAME
<think><set name="topic">ASKING TO ADD NEW CONTACTNAME</set></think>
Would you like to add <get name="contactname"/> as a contact?

ASK CONTACTNAME
<srai>CONTACTDEBUGINFO ASK CONTACTNAME</srai><think><set name="topic">ASKING CONTACTNAME</set></think>
Who do you want to <lowercase><get name="modecom"/></lowercase>?

ASK MESSAGEBODY
<think><set name="savedtopic"><get name="topic"/></set><set name="topic">ASKING MESSAGEBODY</set></think>
What is your message to <get name="displayname"/>?

CONTACTDIALOG
<srai>CONTACTDEBUGINFO CONTACTDIALOG</srai><think><set name="multipleids"><srai>MULTIPLEIDS <get name="contactname"/></srai></set><set name="multiplenames"><srai>MULTIPLENAMES <get name="contactname"/></srai></set><set name="contactlist"><srai>CONTACTLIST <get name="multipleids"/></srai><item>None of the above</item></set><set name="topic">GETTING SELECTEDCONTACT</set></think><oob><dialog><title>Which contact?</title><list><get name="contactlist"/></list></dialog></oob>
You have multiple contacts named <get name="contactname"/>: <get name="multiplenames"/>.  Which one would you like to 
<lowercase><get name="modecom"/></lowercase>?

CONTACTDIALOG *
<think>
        <set name="contactname">
          <star/>
        </set>
        <set name="modecom">CALL</set>
      </think>
      <srai>CONTACTDIALOG</srai>

<topic name="GETTING SELECTEDCONTACT">
_* ONE WOULD YOU LIKE TO *
<think>
          <set name="topic">
            <get name="unknown"/>
          </set>
          <set name="selectedcontact">
            <star/>
          </set>
          <set name="contactname">
            <get name="selectedcontact"/>
          </set>
          <set name="contactid">
            <srai>CONTACTID <get name="selectedcontact"/></srai>
          </set>
          <srai>SET ALL CONTACTINFO</srai>
        </think>
        <srai>REMEMBERFAMILIARNAME</srai>
        <condition name="selectedcontact">
          <li value="None of the above">
            <srai>CONTACTFINALIZE</srai>
            <srai>NORESP</srai>
          </li>
          <li>
            <condition name="contactid">
              <li value="unknown">
                <srai>
                  <star/>
                </srai>
              </li>
              <li>
                <srai>RESUMEACTION <get name="modecom"/></srai>
              </li>
            </condition>
          </li>
        </condition>


<topic name="ASKING MESSAGEBODY">
_WHAT IS YOUR MESSAGE TO *
<think>
          <set name="topic">unknown</set>
          <set name="messagebody">
            <star/>
          </set>
        </think>
        <srai>RESUMEACTION <get name="modecom"/></srai>


<topic name="ASKING CONTACTURI">
_WHAT IS THE * FOR *
<think>
          <set name="topic">unknown</set>
          <set name="contacturi">
            <star/>
          </set>
          <set name="isaphonenumber">
            <srai>ISAPHONENUMBER <get name="contacturi"/></srai>
          </set>
          <set name="isanemailaddress">
            <srai>ISANEMAILADDRESS <get name="contacturi"/></srai>
          </set>
          <set name="isacontacturi">
            <srai>LOGICALOR <get name="isanemailaddress"/> <get name="isaphonenumber"/></srai>
          </set>
          <condition name="isanemailaddress" value="true">
            <set name="emailaddress">
              <get name="contacturi"/>
            </set>
            <set name="learnpattern">EMAILADDRESS</set>
          </condition>
          <condition name="isaphonenumber" value="true">
            <set name="dialnumber">
              <srai>FORMATPHONENUMBER <get name="contacturi"/></srai>
            </set>
            <set name="learnpattern">DIALNUMBER</set>
          </condition>
        </think>
        <condition name="isacontacturi">
          <li value="true">
            <srai>ADDINFO CONTACTID</srai>
            <srai>RESUMEACTION <get name="modecom"/></srai>
          </li>
          <li>I did not recognize <get name="contacturi"/> as a phone number or email address. <srai>CONTACTFINALIZE</srai> <srai><star/></srai></li>
        </condition>


<topic name="ASKING CONTACTNAME">
_WHO DO YOU WANT TO *
<think>
          <set name="topic">unknown</set>
          <set name="contactname">
            <star/>
          </set>
          <set name="isshortanswer">
            <srai>ISSHORTANSWER <star/></srai>
          </set>
        </think>
        <condition name="isshortanswer">
          <li value="true">
            <srai>RESUMEACTION <get name="modecom"/></srai>
          </li>
          <li>
            <srai>CONTACTFINALIZE</srai>
            <srai>
              <star/>
            </srai>
          </li>
        </condition>


EMAILACTION
<srai>CONTACTDEBUGINFO EMAILACTION</srai>
      <think>
        <set name="modecom">EMAIL</set>
      </think>
      <condition name="checkednameoruri">
        <li value="false">
          <srai>RESOLVE NAMEORURI</srai>
        </li>
        <li>
          <condition name="contactname">
            <li value="unknown">
              <srai>ASK CONTACTNAME</srai>
            </li>
            <li>
              <condition name="checkedhimher">
                <li value="false">
                  <srai>RESOLVE HIMHER</srai>
                </li>
                <li>
                  <condition name="checkedfamiliarname">
                    <li value="false">
                      <srai>RESOLVE FAMILIARNAME</srai>
                    </li>
                    <li>
                      <condition name="contactid">
                        <li value="unknown">
                          <srai>RESOLVE CONTACTNAME</srai>
                        </li>
                        <li>
                          <condition name="contacturi">
                            <li value="unknown">
                              <srai>RESOLVE CONTACTURI</srai>
                            </li>
                            <li>
                              <condition name="messagebody">
                                <li value="unknown">
                                  <srai>ASK MESSAGEBODY</srai>
                                </li>
                                <li><oob><email><to><get name="contacturi"/></to><subject>Message compose with CallMom!</subject><body><get name="messagebody"/></body></email></oob>Now sending "<get name="messagebody"/>" to <get name="displayname"/>. <srai>CONTACTFINALIZE</srai></li>
                              </condition>
                            </li>
                          </condition>
                        </li>
                      </condition>
                    </li>
                  </condition>
                </li>
              </condition>
            </li>
          </condition>
        </li>
      </condition>

DEBUG CONTACT
<set name="debugcontact">true</set>

CONTACTFINALIZE
<think>
        <set name="topic">
          <get name="savedtopic"/>
        </set>
      </think>
      <srai>CONTACTINIT PREDICATES</srai>

DIALNUMBER UNKNOWN *
<think>
        <set name="dialnumber">
          <srai>DIALNUMBER MOBILE <star/></srai>
        </set>
        <condition name="dialnumber" value="unknown">
          <set name="dialnumber">
            <srai>DIALNUMBER HOME <star/></srai>
          </set>
        </condition>
        <condition name="dialnumber" value="unknown">
          <set name="dialnumber">
            <srai>DIALNUMBER WORK <star/></srai>
          </set>
        </condition>
        <condition name="dialnumber" value="unknown">
          <set name="dialnumber">
            <srai>DIALNUMBER CUSTOM <star/></srai>
          </set>
        </condition>
      </think>
      <get name="dialnumber"/>

NEW CONTACT
<srai>CONTACTDEBUGINFO ADD CONTACT</srai>
      <srai>CONTACTINIT</srai>
      <srai>ADDACTION</srai>

NEW CONTACT *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
      </think>
      <srai>ADDACTION</srai>

<topic name="ASKING TO ADD NEW CONTACTURI">
YESWOULD YOU LIKE TO ADD ONE
<think>
          <set name="topic">ASKING CONTACTURI</set>
        </think>
        <condition name="modecom">
          <li value="EMAIL">What is the email address for <get name="contactname"/>?</li>
          <li value="CALL">What is the phone number for <get name="contactname"/>?</li>
          <li value="SMS">What is the mobile number for <get name="contactname"/>?</li>
          <li value="ADD">What is the mobile number for <get name="contactname"/>?</li>
          <li>
            <srai>CONTACTFINALIZE</srai>
            <srai>NORESP</srai>
          </li>
        </condition>


<topic name="ASKING TO ADD NEW CONTACTNAME">
YESWOULD YOU LIKE TO ADD * AS A CONTACT
<think><set name="topic">unknown</set><set name="displayname"><get name="contactname"/></set></think><think><srai>ADDINFO DISPLAYNAME <get name="contactname"/> DIALNUMBER unknown PHONETYPE unknown EMAILADDRESS unknown EMAILTYPE unknown BIRTHDAY unknown</srai></think>
I've saved <get name="contactname"/> to your contacts.
<srai>RESUMEACTION <get name="modecom"/></srai>


CONTACTINIT
<think>
        <set name="savedtopic">
          <get name="topic"/>
        </set>
      </think>
      <srai>CONTACTINIT PREDICATES</srai>

CONTACTINIT PREDICATES
<think>
        <set name="checkedfamiliarname">false</set>
        <set name="checkedhimher">false</set>
        <set name="checkednameoruri">false</set>
        <set name="contactid">unknown</set>
        <set name="contactaddress">unknown</set>
        <set name="contactbirthday">unknown</set>
        <set name="contactname">unknown</set>
        <set name="contactquery">unknown</set>
        <set name="contacttype">unknown</set>
        <set name="contacturi">unknown</set>
        <set name="dialnumber">unknown</set>
        <set name="displayname">unknown</set>
        <set name="emailaddress">unknown</set>
        <set name="externalname">unknown</set>
        <set name="familiarcontactid">unknown</set>
        <set name="familiarcontactname">unknown</set>
        <set name="familiarname">unknown</set>
        <set name="familiarpredicate">unknown</set>
        <set name="familiarpronoun">unknown</set>
        <set name="forceaddcontact">false</set>
        <set name="isacontacturi">false</set>
        <set name="isanemailaddress">false</set>
        <set name="isaphonenumber">false</set>
        <set name="isafamiliarname">false</set>
        <set name="learnpattern">unknown</set>
        <set name="messagebody">unknown</set>
        <set name="modecom">unknown</set>
        <set name="multipleids">false</set>
        <set name="topic">unknown</set>
      </think>

NEWCONTACTID
<condition name="contactcount">
        <li value="unknown">CMContactID<set name="contactcount">0</set></li>
        <li>CMContactID<set name="contactcount"><srai>SUCCESSOR <get name="contactcount"/></srai></set></li>
      </condition>

RESOLVE NAMEORURI
<srai>CONTACTDEBUGINFO RESOLVE NAMEORURI</srai>
      <think>
        <set name="checkednameoruri">true</set>
        <set name="isaphonenumber">
          <srai>ISAPHONENUMBER <get name="contactname"/></srai>
        </set>
        <set name="isanemailaddress">
          <srai>ISANEMAILADDRESS <get name="contactname"/></srai>
        </set>
      </think>
      <think>
        <condition name="modecom">
          <li value="EMAIL">
            <condition name="isanemailaddress" value="true">
              <set name="contactid">undefined</set>
              <set name="displayname">
                <set name="emailaddress">
                  <set name="contacturi">
                    <get name="contactname"/>
                  </set>
                </set>
              </set>
            </condition>
          </li>
          <li>
            <condition name="isaphonenumber" value="true"><set name="contactid">undefined</set>
  &gt;<set name="displayname"><set name="dialnumber"><set name="contacturi"><srai>FORMATPHONENUMBER <get name="contactname"/></srai></set></set></set>
  </condition>
          </li>
        </condition>
      </think>
      <srai>RESUMEACTION <get name="modecom"/></srai>

RESOLVE CONTACTNAME
<srai>CONTACTDEBUGINFO RESOLVE CONTACTNAME</srai>
      <think>
        <set name="contactid">
          <srai>CONTACTID <get name="contactname"/></srai>
        </set>
        <set name="multipleids">
          <srai>MULTIPLEIDS <get name="contactname"/></srai>
        </set>
      </think>
      <condition name="multipleids">
        <li value="false">
          <condition name="contactid">
            <li value="unknown">
              <condition name="modecom">
                <li value="QUERY">
                  <think>
                    <set name="contactid">undefined</set>
                    <set name="externalname">
                      <get name="contactname"/>
                    </set>
                  </think>
                  <srai>RESUMEACTION <get name="modecom"/></srai>
                </li>
                <li>
                  <condition name="forceaddcontact">
                    <li value="false">
                      <srai>ASK TO ADD NEW CONTACTNAME</srai>
                    </li>
                    <li>
                      <think>
                        <set name="displayname">
                          <get name="contactname"/>
                        </set>
                      </think>
                      <srai>ADDINFO DISPLAYNAME <get name="contactname"/> DIALNUMBER unknown PHONETYPE unknown EMAILADDRESS unknown EMAILTYPE unknown BIRTHDAY unknown</srai>
                      <srai>RESUMEACTION <get name="modecom"/></srai>
                    </li>
                  </condition>
                </li>
              </condition>
            </li>
            <li>
              <srai>SET ALL CONTACTINFO</srai>
              <srai>RESUMEACTION <get name="modecom"/></srai>
            </li>
          </condition>
        </li>
        <li>
          <srai>CONTACTDIALOG</srai>
        </li>
      </condition>

RESOLVE FAMILIARNAME
<srai>CONTACTDEBUGINFO RESOLVE FAMILIARNAME</srai>
      <think>
        <set name="checkedfamiliarname">true</set>
        <set name="familiarname">
          <get name="contactname"/>
        </set>
        <set name="familiarpredicate">
          <srai>FAMILIARPREDICATE <get name="familiarname"/></srai>
        </set>
        <set name="familiarpronoun">
          <srai>FAMILIARPRONOUN <get name="familiarname"/></srai>
        </set>
        <set name="isafamiliarname">
          <srai>ISAFAMILIARNAME <get name="familiarname"/></srai>
        </set>
        <set name="familiarcontactname">
          <srai>GETFAMILIARNAME</srai>
        </set>
        <set name="familiarcontactid">
          <srai>CONTACTID <get name="familiarname"/></srai>
        </set>
        <condition name="familiarcontactname" value="who">
          <set name="familiarcontactname">unknown</set>
        </condition>
      </think>
      <!--
Resolve familiarname:
contactname = <get name="contactname"/>.
familiarname = <get name="familiarname"/>.
isafamiliarname = <get name="isafamiliarname"/>.
familiarpredicate =  <get name="familiarpredicate"/>.
familiarcontactname = <get name="familiarcontactname"/>.
familiarcontactid = <get name="familiarcontactid"/>.
-->
      <condition name="familiarcontactid">
        <li value="unknown">
          <condition name="familiarcontactname">
            <li value="unknown">
              <condition name="isafamiliarname">
                <li value="true">
                  <srai>ASK FAMILIAR CONTACTNAME</srai>
                </li>
                <li>
                  <srai>RESUMEACTION <get name="modecom"/></srai>
                </li>
              </condition>
            </li>
            <li>
              <think>
                <set name="contactname">
                  <get name="familiarcontactname"/>
                </set>
              </think>
              <srai>RESUMEACTION <get name="modecom"/></srai>
            </li>
          </condition>
        </li>
        <li>
          <think>
            <set name="contactname">
              <get name="familiarname"/>
            </set>
          </think>
          <srai>RESUMEACTION <get name="modecom"/></srai>
        </li>
      </condition>

RESOLVE HIMHER
<srai>CONTACTDEBUGINFO RESOLVE HIMHER</srai>
      <think>
        <set name="checkedhimher">true</set>
      </think>
      <condition name="contactname">
        <li value="him">
          <condition name="he">
            <li value="who">Who does "him" refer to? <think><set name="topic">ASKING PRONOUN REFERENCE</set></think></li>
            <li>
              <think>
                <set name="contactname">
                  <get name="he"/>
                </set>
              </think>
              <srai>RESUMEACTION <get name="modecom"/></srai>
            </li>
          </condition>
        </li>
        <li value="her">
          <condition name="she">
            <li value="who">Who does "her" refer to? <think><set name="topic">ASKING PRONOUN REFERENCE</set></think></li>
            <li>
              <think>
                <set name="contactname">
                  <get name="she"/>
                </set>
              </think>
              <srai>RESUMEACTION <get name="modecom"/></srai>
            </li>
          </condition>
        </li>
        <li>
          <think>
            <srai>SETHESHE <get name="contactname"/></srai>
          </think>
          <srai>RESUMEACTION <get name="modecom"/></srai>
        </li>
      </condition>

<topic name="ASKING PRONOUN REFERENCE">
_WHO DOES HIM REFER TO
<think><set name="he"><star/></set><set name="topic">unknown</set><set name="contactname"><star/></set></think>
Ok.  He is <star/>.   <srai>RESUMEACTION <get name="modecom"/></srai>


<topic name="ASKING PRONOUN REFERENCE">
_WHO DOES HER REFER TO
<think><set name="she"><star/></set><set name="contactname"><star/></set><set name="topic">unknown</set></think>
Ok.  She is <star/>.   <srai>RESUMEACTION <get name="modecom"/></srai>


<topic name="ASKING PRONOUN REFERENCE">
$MY *WHO DOES HIM REFER TO
<think><set name="he"><star/></set><set name="contactname"><star/></set><set name="topic">unknown</set></think>
Ok.  He is <star/>.   <srai>RESUMEACTION <get name="modecom"/></srai>


<topic name="ASKING PRONOUN REFERENCE">
$MY *WHO DOES HER REFER TO
<think><set name="she"><star/></set><set name="contactname"><star/></set><set name="topic">unknown</set></think>
Ok.  She is <star/>.   <srai>RESUMEACTION <get name="modecom"/></srai>


RESOLVE CONTACTURI
<srai>CONTACTDEBUGINFO RESOLVE CONTACTURI</srai>
      <think>
        <set name="contactid">
          <srai>CONTACTID <get name="contactname"/></srai>
        </set>
      </think>
      <condition name="contactid">
        <li value="unknown">
          <condition name="forceaddcontact">
            <li value="false">I didn't find <get name="contactname"/> in your contacts.      <srai>ASK TO ADD NEW CONTACTNAME</srai></li>
            <li>
              <think>
                <set name="displayname">
                  <get name="contactname"/>
                </set>
              </think>
              <srai>RESUMEACTION <get name="modecom"/></srai>
            </li>
          </condition>
        </li>
        <li>
          <think>
            <set name="displayname">
              <srai>DISPLAYNAME <get name="contactid"/></srai>
            </set>
          </think>
          <condition name="modecom">
            <li value="EMAIL">
              <think>
                <set name="emailaddress">
                  <set name="contacturi">
                    <srai>EMAILADDRESS <get name="contacttype"/> <get name="contactid"/></srai>
                  </set>
                </set>
              </think>
              <condition name="contacturi">
                <li value="unknown"><think><set name="topic">ASKING TO ADD NEW CONTACTURI</set></think> 
      You haven't yet added <condition name="contacttype"><li value="unknown">an</li><li>a <get name="contacttype"/></li></condition> email address for <get name="displayname"/> to your contacts.  Would you like to add one?
      </li>
                <li>
                  <srai>SET ALL CONTACTINFO</srai>
                  <srai>RESUMEACTION <get name="modecom"/></srai>
                </li>
              </condition>
            </li>
            <li>
              <think>
                <set name="dialnumber">
                  <set name="contacturi">
                    <srai>DIALNUMBER <get name="contacttype"/> <get name="contactid"/></srai>
                  </set>
                </set>
              </think>
              <condition name="contacturi">
                <li value="unknown"><think><set name="topic">ASKING TO ADD NEW CONTACTURI</set></think> 
You haven't yet added <condition name="contacttype"><li value="unknown">a phone</li><li>a <get name="contacttype"/></li></condition> number for <get name="displayname"/> to your contacts.  Would you like to add one?
      </li>
                <li>
                  <srai>SET ALL CONTACTINFO</srai>
                  <srai>RESUMEACTION <get name="modecom"/></srai>
                </li>
              </condition>
            </li>
          </condition>
        </li>
      </condition>

DIAL
<srai>CONTACTDEBUGINFO CALL</srai>
      <srai>CONTACTINIT</srai>
      <srai>CALLACTION</srai>

ADDACTION
<srai>CONTACTDEBUGINFO ADDACTION</srai>
      <think>
        <set name="modecom">ADD</set>
        <set name="forceaddcontact">true</set>
      </think>
      <condition name="checkedfamiliarname">
        <li value="false">
          <srai>RESOLVE FAMILIARNAME</srai>
        </li>
        <li>
          <condition name="contactname">
            <li value="unknown">
              <srai>ASK CONTACTNAME</srai>
            </li>
            <li>
              <condition name="contactid">
                <li value="unknown">
                  <srai>RESOLVE CONTACTNAME</srai>
                </li>
                <li>
                  <condition name="contacturi">
                    <li value="unknown">
                      <srai>RESOLVE CONTACTURI</srai>
                    </li>
                    <li>
                      <srai>ADDINFO CONTACTID</srai>
                    </li>
                  </condition>
                </li>
              </condition>
            </li>
          </condition>
        </li>
      </condition>

CALLACTION
<srai>CONTACTDEBUGINFO CALLACTION</srai>
      <think>
        <set name="modecom">CALL</set>
      </think>
      <condition name="checkednameoruri">
        <li value="false">
          <srai>RESOLVE NAMEORURI</srai>
        </li>
        <li>
          <condition name="contactname">
            <li value="unknown">
              <srai>ASK CONTACTNAME</srai>
            </li>
            <li>
              <condition name="checkedhimher">
                <li value="false">
                  <srai>RESOLVE HIMHER</srai>
                </li>
                <li>
                  <condition name="checkedfamiliarname">
                    <li value="false">
                      <srai>RESOLVE FAMILIARNAME</srai>
                    </li>
                    <li>
                      <condition name="contactid">
                        <li value="unknown">
                          <srai>RESOLVE CONTACTNAME</srai>
                        </li>
                        <li>
                          <condition name="contacturi">
                            <li value="unknown">
                              <srai>RESOLVE CONTACTURI</srai>
                            </li>
                            <li><oob><dial><get name="contacturi"/></dial></oob> Now dialing <get name="displayname"/>. <srai>CONTACTFINALIZE</srai></li>
                          </condition>
                        </li>
                      </condition>
                    </li>
                  </condition>
                </li>
              </condition>
            </li>
          </condition>
        </li>
      </condition>

EMAILADDRESS UNKNOWN *
<think>
        <set name="emailaddress">
          <srai>EMAILADDRESS HOME <star/></srai>
        </set>
        <condition name="emailaddress" value="unknown">
          <set name="emailaddress">
            <srai>EMAILADDRESS WORK <star/></srai>
          </set>
        </condition>
        <condition name="emailaddress" value="unknown">
          <set name="emailaddress">
            <srai>EMAILADDRESS CUSTOM <star/></srai>
          </set>
        </condition>
      </think>
      <get name="emailaddress"/>

QUERYINFO EXTERNAL
<srai>CONTACTDEBUGINFO QUERTYINFO CONTACTID</srai>
      <condition name="contactquery">
        <li value="DISPLAYNAME">
          <sraix service="pannous">WHAT IS <get name="contactname"/>'s REAL NAME</sraix>
        </li>
        <li value="BIRTHDAY">
          <sraix service="pannous">WHEN IS <get name="contactname"/>'s BIRTHDAY</sraix>
        </li>
        <li value="DIALNUMBER">
          <sraix service="pannous">WHAT IS <get name="contactname"/>'s PHONE NUMBER</sraix>
        </li>
        <li value="EMAILADDRESS">
          <sraix service="pannous">WHAT IS <get name="contactname"/>'s EMAIL ADDREESS</sraix>
        </li>
        <li>
          <sraix service="pannous">WHO IS <get name="contactname"/></sraix>
        </li>
      </condition>

QUERYINFO CONTACTID
<srai>CONTACTDEBUGINFO QUERTYINFO CONTACTID</srai>
      <think>
        <set name="displayname">
          <srai>DISPLAYNAME <get name="contactid"/></srai>
        </set>
        <set name="contacttype">
          <lowercase>
            <get name="contacttype"/>
          </lowercase>
        </set>
        <set name="contactbirthday">
          <srai>CONTACTBIRTHDAY <get name="contactid"/></srai>
        </set>
        <set name="dialnumber">
          <srai>DIALNUMBER <get name="contacttype"/> <get name="contactid"/></srai>
        </set>
        <set name="emailaddress">
          <srai>EMAILADDRESS <get name="contacttype"/> <get name="contactid"/></srai>
        </set>
      </think>
      <condition name="contactquery">
        <li value="DISPLAYNAME">
          <condition name="displayname">
            <li value="unknown"><get name="contactname"/>'s full name is <get name="contactname"/>.</li>
            <li><get name="contactname"/>'s full name is <get name="displayname"/>.</li>
          </condition>
        </li>
        <li value="BIRTHDAY">
          <condition name="contactbirthday">
            <li value="unknown">You don't have <get name="displayname"/>'s birthday in your contacts.</li>
            <li><get name="displayname"/>'s birthday is <get name="contactbirthday"/>.</li>
          </condition>
        </li>
        <li value="DIALNUMBER">
          <condition name="dialnumber">
            <li value="unknown">I couldn't find a <condition name="contacttype"><li value="unknown">phone</li><li><get name="contacttype"/></li></condition> number for <get name="displayname"/> in your contacts.</li>
            <li><get name="displayname"/>'s <condition name="contacttype"><li value="unknown">phone</li><li><get name="contacttype"/></li></condition> number is <get name="dialnumber"/>.</li>
          </condition>
        </li>
        <li value="EMAILADDRESS">
          <condition name="emailaddress">
            <li value="unknown">I couldn't find <condition name="contacttype"><li value="unknown">an</li><li>a <get name="contacttype"/></li></condition> email address for <get name="displayname"/> in your contacts.</li>
            <li><get name="displayname"/>'s <condition name="contacttype"><li value="unknown"/><li><get name="contacttype"/></li></condition> email address is <get name="emailaddress"/>.</li>
          </condition>
        </li>
        <li>I'm not sure what you're asking.
<!--
displayname: <srai>DISPLAYNAME <get name="contactid"/></srai>
dialnumber mobile: <srai>DIALNUMBER MOBILE <get name="contactid"/></srai>
dialnumber home: <srai>DIALNUMBER HOME <get name="contactid"/></srai>
emailaddress home: <srai>EMAILADDRESS HOME <get name="contactid"/></srai>
emailaddress work: <srai>EMAILADDRESS WORK <get name="contactid"/></srai>
birthday: <srai>CONTACTBIRTHDAY <get name="contactid"/></srai>
-->
</li>
      </condition>

$EMAIL *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
      </think>
      <srai>EMAILACTION</srai>

$EMAIL * AT *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="contacttype">
          <star index="2"/>
        </set>
      </think>
      <srai>EMAILACTION</srai>
      <srai>CONTACTFINALIZE</srai>

$EMAIL * AT * DOT *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname"><star/> at <star index="2"/> dot <star index="3"/></set>
      </think>
      <srai>EMAILACTION</srai>

$EMAIL * MESSAGEBODY *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="messagebody">
          <star index="2"/>
        </set>
      </think>
      <srai>EMAILACTION</srai>

$EMAIL MESSAGEBODY *
<srai>CONTACTINIT</srai>
      <think>
        <set name="messagebody">
          <star/>
        </set>
      </think>
      <srai>EMAILACTION</srai>

CALL * AT *
<srai>CONTACTDEBUGINFO CALL <star/></srai>
      <srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="contacttype">
          <star index="2"/>
        </set>
      </think>
      <srai>CALLACTION</srai>

ADD CONTACT
<srai>NEW CONTACT</srai>

SMSACTION
<srai>CONTACTDEBUGINFO SMSACTION</srai>
      <think>
        <set name="modecom">SMS</set>
      </think>
      <condition name="checkednameoruri">
        <li value="false">
          <srai>RESOLVE NAMEORURI</srai>
        </li>
        <li>
          <condition name="contactname">
            <li value="unknown">
              <srai>ASK CONTACTNAME</srai>
            </li>
            <li>
              <condition name="checkedhimher">
                <li value="false">
                  <srai>RESOLVE HIMHER</srai>
                </li>
                <li>
                  <condition name="checkedfamiliarname">
                    <li value="false">
                      <srai>RESOLVE FAMILIARNAME</srai>
                    </li>
                    <li>
                      <condition name="contactid">
                        <li value="unknown">
                          <srai>RESOLVE CONTACTNAME</srai>
                        </li>
                        <li>
                          <condition name="contacturi">
                            <li value="unknown">
                              <srai>RESOLVE CONTACTURI</srai>
                            </li>
                            <li>
                              <condition name="messagebody">
                                <li value="unknown">
                                  <srai>ASK MESSAGEBODY</srai>
                                </li>
                                <li><oob><sms><recipient><get name="contacturi"/></recipient><message><get name="messagebody"/></message></sms></oob> Now sending "<get name="messagebody"/>" to <get name="displayname"/>. <srai>CONTACTFINALIZE</srai></li>
                              </condition>
                            </li>
                          </condition>
                        </li>
                      </condition>
                    </li>
                  </condition>
                </li>
              </condition>
            </li>
          </condition>
        </li>
      </condition>

CONTACTDEBUGINFO *
<condition name="debugcontact" value="true"><star/>:
checkedfamiliarname: <get name="checkedfamiliarname"/>.
checkedhimher: <get name="checkedhimher"/>.
checkednameoruri: <get name="checkednameoruri"/>.
contactid: <get name="contactid"/>.
contactname: <get name="contactname"/>.
contactquery: <get name="contactquery"/>.
contacttype: <get name="contacttype"/>.
contacturi: <get name="contacturi"/>.
dialnumber: <get name="dialnumber"/>.
displayname: <get name="displayname"/>.
emailaddress: <get name="emailaddress"/>.
externalname: <get name="externalname"/>.
familiarcontactid: <get name="familiarcontactid"/>.
familiarcontactname: <get name="familiarcontactname"/>.
familiarname: <get name="familiarname"/>.
familiarpredicate: <get name="familiarpredicate"/>.
familiarpronoun: <get name="familiarpronoun"/>
forceaddcontact: <get name="forceaddcontact"/>.
isaphonenumber: <get name="isaphonenumber"/>. 
isanemailaddress: <get name="isanemailaddress"/>. 
isacontacturi: <get name="isacontacturi"/>.
isafamiliarname: <get name="isafamiliarname"/>.
learnpattern: <get name="learnpattern"/>.
messagebody: <get name="messagebody"/>.
modecom: <get name="modecom"/>.
multipleids: <get name="multipleids"/>.
savedtopic: <get name="savedtopic"/>.
topic: <get name="topic"/>.
</condition>

SET ALL CONTACTINFO
<think>
        <set name="displayname">
          <srai>DISPLAYNAME <get name="contactid"/></srai>
        </set>
        <set name="dialnumber">
          <srai>DIALNUMBER <get name="contacttype"/> <get name="contactid"/></srai>
        </set>
        <set name="emailaddress">
          <srai>EMAILADDRESS <get name="contacttype"/> <get name="contactid"/></srai>
        </set>
        <set name="contactbirthday">
          <srai>CONTACTBIRTHDAY <get name="contacttype"/> <get name="contactid"/></srai>
        </set>
      </think>

WHEN IS * S BIRTHDAY
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="contactquery">BIRTHDAY</set>
      </think>
      <srai>QUERYACTION</srai>

WHEN IS HIS BIRTHDAY
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">him</set>
        <set name="contactquery">BIRTHDAY</set>
      </think>
      <srai>QUERYACTION</srai>

WHEN IS HER BIRTHDAY
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">her</set>
        <set name="contactquery">BIRTHDAY</set>
      </think>
      <srai>QUERYACTION</srai>

WHAT IS MY * NUMBER
<srai>WHAT IS ME S <star/> NUMBER</srai>

WHAT IS * S * NUMBER
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="contacttype">
          <star index="2"/>
        </set>
        <set name="contactquery">DIALNUMBER</set>
      </think>
      <srai>QUERYACTION</srai>

COMMASEPARATENAMES *
<srai>DISPLAYNAME <star/></srai>

COMMASEPARATENAMES * *
<srai>DISPLAYNAME <star/></srai>, <srai>COMMASEPARATENAMES <star index="2"/></srai>

MULTIPLENAMES *
<think>
        <set name="multipleids">
          <srai>MULTIPLEIDS <star/></srai>
        </set>
      </think>
      <condition name="multipleids">
        <li value="false">false</li>
        <li>
          <srai>COMMASEPARATENAMES <get name="multipleids"/></srai>
        </li>
      </condition>

CONTACTLIST *
<item>
        <srai>DISPLAYNAME <star/></srai>
      </item>

CONTACTLIST * *
<srai>CONTACTLIST <star/></srai>
      <srai>CONTACTLIST <star index="2"/></srai>

RESUMEACTION QUERY
<srai>QUERYACTION</srai>

RESUMEACTION CALL
<srai>CALLACTION</srai>

RESUMEACTION *
Stopped processing.

RESUMEACTION EMAIL
<srai>EMAILACTION</srai>

RESUMEACTION SMS
<srai>SMSACTION</srai>

RESUMEACTION ADD
<srai>ADDACTION</srai>

QUERYACTION
<srai>CONTACTDEBUGINFO QUERYACTION</srai>
      <think>
        <set name="modecom">QUERY</set>
      </think>
      <condition name="checkedfamiliarname">
        <li value="false">
          <srai>RESOLVE FAMILIARNAME</srai>
        </li>
        <li>
          <condition name="contactname">
            <li value="unknown">
              <srai>ASK CONTACTNAME</srai>
            </li>
            <li>
              <condition name="checkedhimher">
                <li value="false">
                  <srai>RESOLVE HIMHER</srai>
                </li>
                <li>
                  <condition name="contactid">
                    <li value="unknown">
                      <srai>RESOLVE CONTACTNAME</srai>
                    </li>
                    <li>
                      <condition name="externalname">
                        <li value="unknown">
                          <srai>QUERYINFO CONTACTID</srai>
                        </li>
                        <li>
                          <srai>QUERYINFO EXTERNAL</srai>
                        </li>
                      </condition>
                    </li>
                  </condition>
                </li>
              </condition>
            </li>
          </condition>
        </li>
      </condition>

$SMS
<srai>CONTACTDEBUGINFO SMS</srai>
      <srai>CONTACTINIT</srai>
      <srai>SMSACTION</srai>

$SMS SMESSAGE *
<srai>CONTACTINIT</srai>
      <think>
        <set name="messagebody">
          <star/>
        </set>
      </think>
      <srai>SMSACTION</srai>

$SMS *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
      </think>
      <srai>SMSACTION</srai>

$SMS * SMESSAGE *
<srai>CONTACTINIT</srai>
      <think>
        <set name="contactname">
          <star/>
        </set>
        <set name="messagebody">
          <star index="2"/>
        </set>
      </think>
      <srai>SMSACTION</srai>

TESTCALL *
Now dialing <star/>.  <oob><dial><star/></dial></oob>


